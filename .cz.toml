[tool.commitizen]
name = "cz_customize"
tag_format = "$version"
version_scheme = "semver2"
version = "0.0.1"
update_changelog_on_bump = true
changelog_file = "CHANGELOG.md"
template = ".gitops/CHANGELOG.md.j2"
bump_message = "Release #1 ðŸ”–: $current_version â†’ $new_version"
version_files = [
    "./publicode.yml",
    "./Guides/User.md",
    "./Guides/Admin.md",
    "./Application/Bookshelf.Cli/Bookshelf.Cli.csproj",
    "README.md:version-",
]


[tool.commitizen.customize]
message_template = "{{change_type}}(#{{feature_ticket_number}}):{% if show_message %} {{message}}{% endif %} (US-{{user_story_number}})"
example = "Feature(#89): this feature enables customization through config file (US-123)"
schema = "<type> #<feature_ticket_number>: <body> (US-<user_story>)"
schema_pattern = "^(Feature|BugFix|Task) #(\\d+):(\\s(.*))? \\(US-(\\d+)\\)$"
bump_pattern = "^(Feature|BugFix|Task) #(\\d+):(\\s(.*))? \\(US-(\\d+)\\)$"
bump_map = { "Feature" = "MINOR", "BugFix" = "PATCH", "Task" = "PATCH", "!" = "MAJOR" }
change_type_order = ["Feature", "BugFix", "Task"]
info = "Commit types: Feature (MINOR bump), BugFix (PATCH bump), Task (PATCH bump). Use ! for breaking changes (MAJOR bump)."
commit_parser = "^(?P<change_type>Feature|BugFix|Task) #(?P<feature_ticket_number>\\d+):(?P<message>.*) \\(US-(?P<user_story_number>\\d+)\\)$"
changelog_pattern = "^(?P<change_type>Feature|BugFix|Task) #(?P<feature_ticket_number>\\d+)(?P<breaking>!?):(?P<message>.*) \\(US-(?P<user_story_number>\\d+)\\)$"
change_type_map = { "Feature" = "Feature", "BugFix" = "Bug Fix", "Task" = "Miscellaneous" }

[[tool.commitizen.customize.questions]]
type = "list"
name = "change_type"
choices = [
    { value = "Feature", name = "Feature: A new feature." },
    { value = "BugFix", name = "BugFix: A bug fix." },
    { value = "Task", name = "Task: A task." },
]
# choices = ["Feature", "Fix"]  # short version
message = "Select the type of change you are committing"

[[tool.commitizen.customize.questions]]
type = "input"
name = "feature_ticket_number"
message = "Feature Ticket Number:"

[[tool.commitizen.customize.questions]]
type = "input"
name = "user_story_number"
message = "User Story Number:"

[[tool.commitizen.customize.questions]]
type = "input"
name = "message"
message = "Commit Body Message:"

[[tool.commitizen.customize.questions]]
type = "confirm"
name = "show_message"
message = "Do you want to add body message in commit?"
